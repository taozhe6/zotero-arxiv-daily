# Zotero Genetics Daily - 后续优化计划

## 1. 优化 Zotero 语料库文献的权重策略

**当前问题：**
目前的权重策略 (`1 / (1 + np.log10(rank))`) 导致最近添加到 Zotero 的文献权重最高，而较旧的文献权重迅速衰减。这对于研究方向可能发生转变的用户（例如从 Meta 分析转向 Genetics 论文）来说，可能不合理，因为它过度强调了历史文献的“新旧”程度，而忽略了其潜在的长期相关性或新方向的兴趣。

**用户反馈：**
用户指出，这种加权方式可能导致推荐结果过度偏向旧的研究方向，而无法有效捕捉到新的兴趣点。

**优化方向（待讨论和实现）：**

*   **A. 不加权 (Equal Weighting)：**
    *   所有 Zotero 语料库中的文献都具有相同的权重。
    *   **优点：** 简单，确保所有历史文献都能平等地贡献相似度。
    *   **缺点：** 可能无法体现用户对近期研究的偏好。
    *   **实现思路：** 将 `decay` 数组设置为所有元素都为 `1 / len(corpus_sorted)`。

*   **B. 线性衰减 (Linear Decay)：**
    *   权重随时间线性衰减，而不是对数衰减。衰减速度更平缓。
    *   **优点：** 比对数衰减更温和，仍能体现时间因素，但不会过快地降低旧文献的影响。
    *   **实现思路：** `decay = np.linspace(max_weight, min_weight, len(corpus_sorted))`，然后归一化。

*   **C. 区分日期，不区分时间 (Daily Batch Weighting)：**
    *   同一天添加到 Zotero 的所有文献具有相同的权重。不同日期的文献权重不同。
    *   **优点：** 更符合用户“批次”添加文献的习惯，避免了微小时间戳差异带来的不必要权重差异。能更好地反映用户在某个时间段内的兴趣。
    *   **实现思路：**
        1.  按 `dateAdded` 的日期部分对文献进行分组。
        2.  对每个日期组分配一个权重（例如，最近的日期组权重最高，然后线性或对数衰减）。
        3.  组内所有文献共享该组的权重。

**优先级：** 中等（在核心功能稳定运行后，根据用户反馈和实际效果进行迭代）。

## 2. 优化网络请求性能 (异步化)

**当前问题：**
`main.py` 中 Zotero API 和 BioRxiv/MedRxiv API 的数据抓取是同步进行的，可能存在 I/O 阻塞，尤其是在网络延迟较高时。

**优化方向：**
引入 `async/await` 异步编程，使用 `aiohttp` 等异步 HTTP 客户端并行或异步地抓取数据。

**优先级：** 低（在计算瓶颈解决后，如果网络请求成为新的瓶要点，再进行考虑）。
